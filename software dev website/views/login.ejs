<%- include('partials/_Header.ejs') %>

<body>
  <div id="accountSidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" style="font-size: 30px;">x</a>
  
    <a href=""><img src="../../resources/imgs/Avoke_alpha.png" alt="Avoke logo" style="width:180px">
      <br>
      <!-- <a href="../home" >Home</a> -->
      <a href="../profile_page" >About us</a>
      <!-- <a href="#">Switch account</a> -->
      <a href="../login" >Login</a>
      <!-- <a href="#">Logout</a> -->
    </a>
  </div>
  <div id="main">
    <button class="openbtn" onclick="openNav()"> â˜° Menu </button>
    <!-- <p>Click menu button above to see your account details.</p> -->
  </div>
  
  <script>
    function openNav() {
      document.getElementById("accountSidebar").style.width = "210px";
      document.getElementById("main").style.marginLeft = "210px";
    }
  
    function closeNav() {
      document.getElementById("accountSidebar").style.width = "0";
      document.getElementById("main").style.marginLeft = "0";
    }
  </script>
    <div class="container">
      <img src="../resources/imgs/Avoke_alpha.png" alt="Avoke Logo"  id= "login_logo" />
    </div>
  <br /><br /><br /><br />
  <!-- Button to click to show the modal-->
  <div class="text-center">
    <!-- <form action="/login/signup" method="post"> -->
    <!-- </form> -->
  </div>
  <br>
  <form action="/login/login" method="post">
      <div class="form-group row">
        <label class="col-sm-2 col-form-label"  for="color_name" id= "labels" >email:</label>
        <div class="col-sm-2">
          <input type="text" class="form-control" name="email" id="email" placeholder="Enter email">
        </div>
      </div>
      <div class="form-group row">
        <label  class="col-sm-2 col-form-label" for="color_message" id= "labels" >password:</label>
        <div class="col-sm-2">
          <input type="password" class="form-control" id="password" name="password" placeholder="Enter password">
        </div>
      </div>
      <button type="submit" class="btn btn-primary" id= 'log_but'>Login</button>
  </form>

  <!-- Sign Up Modal HTML -->
  <form action="/login/signup" method="post">

      <div class="form-group row">
        <label class="col-sm-2 col-form-label" for="color_hex" id= "labels">first_name:</label>
        <div class="col-sm-2">
          <input type="text" class="form-control" name="first_name" id="first_name"  placeholder="Enter first_name" maxlength="6">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 col-form-label"  for="color_name" id= "labels">email:</label>
        <div class="col-sm-2">
          <input type="text" class="form-control" name="email" id="email" placeholder="Enter email">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 col-form-label"  for="color_name" id= "labels">password:</label>
        
        <div class="col-sm-2">
          <input
            id="passw"
            type="password"
            class="form-control"
            name="passw"
            placeholder="Password"
            required="required"
          />
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 col-form-label"  for="color_name" id= "labels">Confirm:</label>
        <div class="col-sm-2">
          <input
            id="cpsw"
            type="password"
            class="form-control"
            name="confirm password"
            placeholder="Confirm Password"
            required="required"
          />
        </div>
      </div>
      <button type="submit" class="btn btn-primary" disabled id = "my_submit_button" id= "labels" >Sign Up</button>

      <div style="text-align:center;">
        <div id="message" style="display: block">
          <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
          <p id="capital" class="invalid">
            A <b>capital (uppercase)</b> letter
          </p>
          <p id="number" class="invalid">A <b>number</b></p>
          <p id="length" class="invalid">Minimum <b>6 characters</b></p>
          <p id="match" class="invalid">
            Password and Confirm Password Match
          </p>
        </div>
      </div>
    </form>
    <script>
        var myInput = document.getElementById("passw");
        var confirmMyInput = document.getElementById("cpsw");
        var letter = document.getElementById("letter");
        var capital = document.getElementById("capital");
        var number = document.getElementById("number");
        var length = document.getElementById("length");
        var match = document.getElementById("match");

        // When the user starts to type something inside the password field
        myInput.onkeyup = function () {
          console.log(letter.classList.contains("invalid"));
          var lowerCaseLetters = /[a-z]/g; // : Fill in the regular experssion for lowerCaseLetters
          var upperCaseLetters = /[A-Z]/g; // : Fill in the regular experssion for upperCaseLetters
          var numbers = /[0-9]/g; // : Fill in the regular experssion for digits
          var minLength = 6; // : Change the minimum length to what what it needs to be in the question
          if (myInput.value.match(lowerCaseLetters)) {
            letter.classList.remove("invalid");
            letter.classList.add("valid");
          } else {
            letter.classList.remove("valid");
            letter.classList.add("invalid");
          }

          // Validate capital letters
          if (myInput.value.match(upperCaseLetters)) {
            capital.classList.remove("invalid");
            capital.classList.add("valid");
          } else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
          }

          // Validate numbers
          if (myInput.value.match(numbers)) {
            number.classList.remove("invalid");
            number.classList.add("valid");
          } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
          }

          // Validate length
          if (myInput.value.length >= minLength) {
            length.classList.remove("invalid");
            length.classList.add("valid");
          } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
          }
        };

        confirmMyInput.onkeyup = function () {
          // Validate password and confirmPassword
          var passEqualsConfPass = false;
          var pas = myInput.value;
          var cpas = confirmMyInput.value;
          if (pas == cpas && pas!='') {
            passEqualsConfPass = true;
          } else {
            passEqualsConfPass = false;
          }
          if (passEqualsConfPass) {
            match.classList.remove("invalid");
            match.classList.add("valid");
          } else {
            match.classList.remove("valid");
            match.classList.add("invalid");
          }

          // Disable or Enable the button based on the elements in classList
          enableButton(letter, capital, number, length, match);
        };

      function enableButton(letter, capital, number, length, match) {
        var button = document.getElementById("my_submit_button");
        var condition = false;
        if (
          letter.classList.contains("valid") &&
          capital.classList.contains("valid") &&
          number.classList.contains("valid") &&
          length.classList.contains("valid") &&
          match.classList.contains("valid")
        ) {
          condition = true;
        }
        if (condition) {
          button.disabled = false;
        }
      }

      function onClickFunction() {
        alert("Changed your password successfully!");
      }
    </script>
  <br /><br /><br />
</body>